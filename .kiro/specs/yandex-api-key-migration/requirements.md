# Requirements Document

## Introduction

Миграция с устаревшего OAuth токена Яндекс.Маркет на новый API-key токен. Согласно рекомендациям поддержки Яндекса, OAuth авторизация устарела и необходимо использовать API-key токены, которые создаются в личном кабинете Маркета в разделе "API и модули".

## Glossary

- **YandexClient**: Клиент для взаимодействия с API Яндекс.Маркет
- **API-key**: Новый формат токена авторизации Яндекс.Маркет (формат: `ACMA:...`)
- **OAuth токен**: Устаревший формат токена авторизации (формат: `Bearer ...`)
- **Authorization Header**: HTTP заголовок для передачи токена авторизации

## Requirements

### Requirement 1

**User Story:** Как разработчик, я хочу использовать API-key токен вместо OAuth, чтобы соответствовать актуальным требованиям Яндекс.Маркет API

#### Acceptance Criteria

1. WHEN YandexClient инициализируется THEN система SHALL использовать API-key формат в заголовке Authorization
2. WHEN выполняется запрос к API Яндекс.Маркет THEN система SHALL отправлять заголовок `Api-Key: {token}` вместо `Authorization: Bearer {token}`
3. WHEN токен читается из конфигурации THEN система SHALL корректно обрабатывать формат API-key (начинающийся с `ACMA:`)
4. WHEN система запускается с API-key токеном THEN все существующие API методы SHALL работать без изменений

### Requirement 2

**User Story:** Как администратор системы, я хочу обновить конфигурацию на сервере, чтобы использовать новый токен в продакшене

#### Acceptance Criteria

1. WHEN конфигурация обновляется на сервере THEN система SHALL использовать новый API-key токен
2. WHEN сервер перезапускается THEN система SHALL успешно авторизоваться с новым токеном
3. WHEN выполняется деплой THEN скрипт SHALL корректно обновить переменные окружения на сервере

### Requirement 3

**User Story:** Как разработчик, я хочу иметь актуальную документацию, чтобы понимать как работает новая авторизация

#### Acceptance Criteria

1. WHEN документация обновляется THEN она SHALL содержать информацию о формате API-key токена
2. WHEN документация обновляется THEN она SHALL содержать инструкции по получению API-key в личном кабинете
3. WHEN пример конфигурации обновляется THEN он SHALL показывать формат API-key токена
