# –°–≤–æ–¥–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞

**–ó–∞–¥–∞—á–∞ 10:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** 6.1, 6.2, 6.3, 6.4, 6.5, 7.3, 7.5

## –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π Logger (src/logger.js)

–î–æ–±–∞–≤–ª–µ–Ω—ã 6 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

#### logMappingError()
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –º–∞–ø–ø–∏–Ω–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤/–∑–∞–∫–∞–∑–æ–≤
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** 6.1 - –≤–∫–ª—é—á–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (offerId_M2, externalCode)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** MapperService, StockService, OrderService

#### logApiError()
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ API –∑–∞–ø—Ä–æ—Å–æ–≤
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** 6.2 - –≤–∫–ª—é—á–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –í—Å–µ API –∫–ª–∏–µ–Ω—Ç—ã –∏ —Å–µ—Ä–≤–∏—Å—ã

#### logFileError()
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** 8.5 - –æ—à–∏–±–∫–∏ —Ñ–∞–π–ª–æ–≤ –Ω–µ —Ä–æ–Ω—è—é—Ç —Å–∏—Å—Ç–µ–º—É
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** OrderMappingStore, MapperService

#### logWebhookError()
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ webhook
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** 4.4 - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ webhook
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** moySkladWebhook router, StockService

#### logOrderError()
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∑–∞–∫–∞–∑–æ–≤
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** 6.3 - –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–∫–∞–∑–∞ –∏ —Å–ø–∏—Å–æ–∫ –Ω–µ–º–∞–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö offerId_M2
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** OrderService

#### logSyncError()
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** 5.5 - –æ—à–∏–±–∫–∏ cron jobs –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** StockService, OrderService

### 2. –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤:

- **MapperService** - 6 –º–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- **OrderService** - 7 –º–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- **StockService** - 8 –º–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- **OrderMappingStore** - 4 –º–µ—Å—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- **moySkladWebhook** - 4 –º–µ—Å—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–æ

### 3. –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** 7.3 - —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ –Ω–∞ `[REDACTED]`:
- MS_TOKEN
- YANDEX_TOKEN
- token
- password
- authorization
- bearer

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** 6.4 - –ª–æ–≥–∏ –≤–∫–ª—é—á–∞—é—Ç timestamp, errorType –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã

–ö–∞–∂–¥—ã–π –ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç:
```json
{
  "timestamp": "YYYY-MM-DD HH:mm:ss",
  "level": "error|warn|info|debug",
  "message": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "errorType": "MAPPING_ERROR|API_ERROR|...",
  "identifiers": { ... },
  "error": "Error message",
  "stack": "Stack trace"
}
```

### 5. –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** 7.5 - —É—Ä–æ–≤–µ–Ω—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ LOG_LEVEL

- `error` - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `warn` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏
- `info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `debug` - –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### 6. –¢–∏–ø—ã –æ—à–∏–±–æ–∫ (errorType)

- `MAPPING_ERROR` - –æ—à–∏–±–∫–∏ –º–∞–ø–ø–∏–Ω–≥–∞
- `API_ERROR` - –æ—à–∏–±–∫–∏ API
- `FILE_ERROR` - –æ—à–∏–±–∫–∏ —Ñ–∞–π–ª–æ–≤
- `WEBHOOK_ERROR` - –æ—à–∏–±–∫–∏ webhook
- `ORDER_ERROR` - –æ—à–∏–±–∫–∏ –∑–∞–∫–∞–∑–æ–≤
- `SYNC_ERROR` - –æ—à–∏–±–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `WEBHOOK_VALIDATION_ERROR` - –≤–∞–ª–∏–¥–∞—Ü–∏—è webhook
- `JSON_PARSE_ERROR` - –ø–∞—Ä—Å–∏–Ω–≥ JSON
- `EXPRESS_ERROR` - –æ—à–∏–±–∫–∏ Express

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

1. **test-logging.js** - –±–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
2. **test-logging-detailed.js** - –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```
‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!

üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π:
  ‚úì 6.1 - –û—à–∏–±–∫–∏ –º–∞–ø–ø–∏–Ω–≥–∞ –≤–∫–ª—é—á–∞—é—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
  ‚úì 6.2 - –û—à–∏–±–∫–∏ API –≤–∫–ª—é—á–∞—é—Ç –¥–µ—Ç–∞–ª–∏ –∑–∞–ø—Ä–æ—Å–∞
  ‚úì 6.3 - –û—à–∏–±–∫–∏ –∑–∞–∫–∞–∑–æ–≤ –≤–∫–ª—é—á–∞—é—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
  ‚úì 6.4 - –õ–æ–≥–∏ –≤–∫–ª—é—á–∞—é—Ç timestamp –∏ errorType
  ‚úì 6.5 - –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ error
  ‚úì 7.3 - –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–∞–Ω–∏—Ç–∏–∑–∏—Ä—É—é—Ç—Å—è
  ‚úì 7.5 - –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ LOG_LEVEL
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

–í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:
- ‚úÖ test-mapper.js
- ‚úÖ test-stock-service.js
- ‚úÖ test-order-service.js

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: **docs/logging-guide.md**

–í–∫–ª—é—á–∞–µ—Ç:
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
- –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. `src/logger.js` - —Ä–∞—Å—à–∏—Ä–µ–Ω —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
2. `src/services/mapperService.js` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
3. `src/services/orderService.js` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. `src/services/stockService.js` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
5. `src/storage/orderMappingStore.js` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
6. `src/routes/moySkladWebhook.js` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã

1. `test-logging.js` - –±–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç
2. `test-logging-detailed.js` - –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
3. `docs/logging-guide.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
4. `LOGGING_IMPLEMENTATION_SUMMARY.md` - —ç—Ç–∞ —Å–≤–æ–¥–∫–∞

## –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|------------|--------|------------|
| 6.1 | ‚úÖ | logMappingError() –≤–∫–ª—é—á–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã |
| 6.2 | ‚úÖ | logApiError() –≤–∫–ª—é—á–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ –∑–∞–ø—Ä–æ—Å–∞ |
| 6.3 | ‚úÖ | logOrderError() –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–∫–∞–∑–∞ |
| 6.4 | ‚úÖ | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤ —Å timestamp –∏ errorType |
| 6.5 | ‚úÖ | –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è |
| 7.3 | ‚úÖ | –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| 7.5 | ‚úÖ | LOG_LEVEL –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è |

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ó–∞–¥–∞—á–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∞. –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (ELK, Splunk)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
