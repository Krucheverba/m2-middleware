# –ì–∞—Ä–∞–Ω—Ç–∏–∏ –∏–∑–æ–ª—è—Ü–∏–∏ M1 –∏ M2

**–î–∞—Ç–∞:** 5 –¥–µ–∫–∞–±—Ä—è 2024  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø - —Ä–∏—Å–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ–±–æ–∏—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤!

---

## ‚úÖ –¢–û–ß–ù–´–ï –ì–ê–†–ê–ù–¢–ò–ò –ò–ó–û–õ–Ø–¶–ò–ò

### 1. –ú1 –ù–ï –ó–ù–ê–ï–¢ –û –ú2 ‚úÖ

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```
–ú–æ–π–°–∫–ª–∞–¥ (–µ–¥–∏–Ω–∞—è –±–∞–∑–∞ —Ç–æ–≤–∞—Ä–æ–≤)
‚îÇ
‚îú‚îÄ product.id: "f8a2da33-bf0a-11ef-0a80-17e3..."
‚îú‚îÄ product.offerId: "Ravenol-HCS-5w-40-5L"  ‚Üê M1 –ß–ò–¢–ê–ï–¢ –≠–¢–û
‚îÇ
‚îî‚îÄ Middleware –ù–ï –¢–†–û–ì–ê–ï–¢ product.offerId ‚úÖ
```

**M1 —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –ú–æ–π–°–∫–ª–∞–¥:**
- ‚úÖ –ß–∏—Ç–∞–µ—Ç `product.offerId` –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –ú–æ–π–°–∫–ª–∞–¥
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π Campaign ID
- ‚úÖ Middleware –ù–ï —á–∏—Ç–∞–µ—Ç –∏ –ù–ï –∏–∑–º–µ–Ω—è–µ—Ç `product.offerId`
- ‚úÖ Middleware –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Campaign ID M1

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
```bash
grep -r "product\.offerId" src/
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–ï–¢ –°–û–í–ü–ê–î–ï–ù–ò–ô ‚úÖ
```

---

### 2. –ú2 –ù–ï –ó–ù–ê–ï–¢ –û –ú1 ‚úÖ

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```
Middleware (–Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
‚îÇ
‚îú‚îÄ –ß–∏—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –∏–∑ —Ñ–∞–π–ª–∞: data/product-mappings.json
‚îú‚îÄ –ù–ï —á–∏—Ç–∞–µ—Ç product.offerId –∏–∑ –ú–æ–π–°–∫–ª–∞–¥ ‚úÖ
‚îú‚îÄ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¢–û–õ–¨–ö–û Campaign ID M2
‚îÇ
‚îî‚îÄ –ú–∞–ø–ø–∏–Ω–≥:
    product.id ‚Üí offerId_M2
    "f8a2da33..." ‚Üí "Ravenol-HCS-5w-40-5L_DBSA"
```

**M2 —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –Ω–∞—à middleware:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∞–π–ª–æ–≤—ã–π –º–∞–ø–ø–∏–Ω–≥ `data/product-mappings.json`
- ‚úÖ –ù–ï —á–∏—Ç–∞–µ—Ç `product.offerId` –∏–∑ –ú–æ–π–°–∫–ª–∞–¥
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π Campaign ID M2
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¢–û–õ–¨–ö–û —Ç–æ–≤–∞—Ä—ã –∏–∑ –º–∞–ø–ø–∏–Ω–≥–∞

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- –ö–æ–¥ –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç —á—Ç–µ–Ω–∏—è `product.offerId`
- –ö–æ–¥ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `expand=attributes` (–∫—Ä–æ–º–µ –º–∏–≥—Ä–∞—Ü–∏–∏)
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `ProductMappingStore`

---

## üîê –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –¢–û–ß–ö–ò –ò–ó–û–õ–Ø–¶–ò–ò

### –¢–æ—á–∫–∞ 1: –¢–æ–∫–µ–Ω—ã

```env
# .env —Ñ–∞–π–ª
MS_TOKEN=c5076f4f532c0639dd4ab9473732c1fa68afb9d4  ‚Üê –û–î–ò–ù –¥–ª—è –æ–±–æ–∏—Ö
YANDEX_CAMPAIGN_ID=YOUR_M2_CAMPAIGN_ID_HERE        ‚Üê –¢–û–õ–¨–ö–û M2
YANDEX_TOKEN=y0__xD7rP4QGKOEPCCalqq_FTCgt7WvCIs... ‚Üê –¢–û–õ–¨–ö–û M2
```

**–ò–∑–æ–ª—è—Ü–∏—è:**
- ‚úÖ –ú–æ–π–°–∫–ª–∞–¥ —Ç–æ–∫–µ–Ω –û–î–ò–ù - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –æ–Ω —á–∏—Ç–∞–µ—Ç –æ–±—â—É—é –±–∞–∑—É
- ‚úÖ –Ø–Ω–¥–µ–∫—Å —Ç–æ–∫–µ–Ω M2 - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è M2
- ‚úÖ –Ø–Ω–¥–µ–∫—Å —Ç–æ–∫–µ–Ω M1 - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è middleware –≤–æ–æ–±—â–µ
- ‚úÖ Campaign ID M2 - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è M2

**M1 –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Ç–æ–∫–µ–Ω—ã –≤ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ú–æ–π–°–∫–ª–∞–¥!**

---

### –¢–æ—á–∫–∞ 2: Campaign ID

```javascript
// src/api/yandexClient.js
constructor() {
  this.campaignId = config.YANDEX_CAMPAIGN_ID; // –¢–û–õ–¨–ö–û M2!
}

async updateStocks(stockUpdates) {
  // –ó–∞–ø—Ä–æ—Å –∏–¥—ë—Ç –¢–û–õ–¨–ö–û –≤ M2
  const response = await this._makeRequestWithRetry(
    'PUT',
    `/campaigns/${this.campaignId}/offers/stocks`, // M2 Campaign ID
    requestData
  );
}
```

**–ì–∞—Ä–∞–Ω—Ç–∏—è:**
- ‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —Å Campaign ID M2
- ‚úÖ Campaign ID M1 –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ middleware
- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∏–¥—É—Ç –≤ —Ä–∞–∑–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω—ã

---

### –¢–æ—á–∫–∞ 3: offerId

```
M1 (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è):
‚îú‚îÄ –ò—Å—Ç–æ—á–Ω–∏–∫: product.offerId –∏–∑ –ú–æ–π–°–∫–ª–∞–¥
‚îú‚îÄ –ü—Ä–∏–º–µ—Ä: "Ravenol-HCS-5w-40-5L"
‚îî‚îÄ Campaign ID: M1

M2 (–Ω–∞—à middleware):
‚îú‚îÄ –ò—Å—Ç–æ—á–Ω–∏–∫: data/product-mappings.json
‚îú‚îÄ –ü—Ä–∏–º–µ—Ä: "Ravenol-HCS-5w-40-5L_DBSA" (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π)
‚îî‚îÄ Campaign ID: M2

–ù–ï–¢ –ü–ï–†–ï–°–ï–ß–ï–ù–ò–ô! ‚úÖ
```

**–ì–∞—Ä–∞–Ω—Ç–∏—è:**
- ‚úÖ M1 –∏ M2 –∏—Å–ø–æ–ª—å–∑—É—é—Ç –†–ê–ó–ù–´–ï offerId
- ‚úÖ M1 –∏ M2 –∏—Å–ø–æ–ª—å–∑—É—é—Ç –†–ê–ó–ù–´–ï Campaign ID
- ‚úÖ –î–∞–∂–µ –µ—Å–ª–∏ offerId —Å–æ–≤–ø–∞–¥—É—Ç, Campaign ID —Ä–∞–∑–Ω—ã–µ ‚Üí —Ä–∞–∑–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω—ã

---

### –¢–æ—á–∫–∞ 4: Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞

```javascript
// src/routes/moySkladWebhook.js
const productId = event.meta.href.split('/').pop();

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∞–ø–ø–∏–Ω–≥
const offerId = mapperService.mapProductIdToOfferId(productId);

if (!offerId) {
  // –¢–æ–≤–∞—Ä –ù–ï –≤ –º–∞–ø–ø–∏–Ω–≥–µ ‚Üí –ò–ì–ù–û–†–ò–†–£–ï–ú ‚úÖ
  logger.warn('–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –º–∞–ø–ø–∏–Ω–≥–µ, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º webhook');
  return;
}

// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –µ—Å—Ç—å –º–∞–ø–ø–∏–Ω–≥ (—Ç–æ–≤–∞—Ä M2)
await stockService.handleStockUpdate(productId);
```

**–ì–∞—Ä–∞–Ω—Ç–∏—è:**
- ‚úÖ Webhook –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¢–û–õ–¨–ö–û —Ç–æ–≤–∞—Ä—ã –∏–∑ –º–∞–ø–ø–∏–Ω–≥–∞
- ‚úÖ –¢–æ–≤–∞—Ä—ã M1 (–±–µ–∑ –º–∞–ø–ø–∏–Ω–≥–∞) –ò–ì–ù–û–†–ò–†–£–Æ–¢–°–Ø
- ‚úÖ –ù–µ—Ç —Ä–∏—Å–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ M1 —á–µ—Ä–µ–∑ M2

---

### –¢–æ—á–∫–∞ 5: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤

```javascript
// src/services/stockService.js
async syncStocks() {
  // –ü–æ–ª—É—á–∞–µ–º –¢–û–õ–¨–ö–û product.id –∏–∑ –º–∞–ø–ø–∏–Ω–≥–∞
  const productIds = this.mapperService.getAllProductIds();
  
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¢–û–õ–¨–ö–û —ç—Ç–∏ —Ç–æ–≤–∞—Ä—ã
  for (const productId of productIds) {
    const offerId = this.mapperService.mapProductIdToOfferId(productId);
    
    if (!offerId) {
      stats.skipped++;
      continue; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º
    }
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ M2 —Å Campaign ID M2
    await this.updateM2Stock(offerId, stockData.availableStock);
  }
}
```

**–ì–∞—Ä–∞–Ω—Ç–∏—è:**
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –¢–û–õ–¨–ö–û —Ç–æ–≤–∞—Ä—ã –∏–∑ –º–∞–ø–ø–∏–Ω–≥–∞
- ‚úÖ –¢–æ–≤–∞—Ä—ã M1 –ù–ï –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è
- ‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –≤ M2 (Campaign ID M2)

---

### –¢–æ—á–∫–∞ 6: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤

```javascript
// src/services/orderService.js
async createMoySkladOrder(m2Order) {
  // –ú–∞–ø–ø–∏–Ω–≥ offerId ‚Üí product.id
  const mappedPositions = await this._mapOrderItems(m2Order);
  
  // –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏–∏ –ë–ï–ó –º–∞–ø–ø–∏–Ω–≥–∞
  const validPositions = mappedPositions.filter(p => p.productId);
  
  // –°–æ–∑–¥–∞—ë–º –∑–∞–∫–∞–∑ –¢–û–õ–¨–ö–û —Å –º–∞–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏
  const orderData = this._buildMoySkladOrderData(m2Order, validPositions);
}
```

**–ì–∞—Ä–∞–Ω—Ç–∏—è:**
- ‚úÖ –ó–∞–∫–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –º–∞–ø–ø–∏–Ω–≥–∞
- ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –±–µ–∑ –º–∞–ø–ø–∏–Ω–≥–∞ –ü–†–û–ü–£–°–ö–ê–Æ–¢–°–Ø
- ‚úÖ –ó–∞–∫–∞–∑—ã M1 –ù–ï –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è

---

## üö® –ß–¢–û –ú–û–ñ–ï–¢ –ü–û–ô–¢–ò –ù–ï –¢–ê–ö?

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–ª—É—á–∞–π–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ Campaign ID M1

**–†–∏—Å–∫:** –ó–∞–ø—Ä–æ—Å—ã –ø–æ–π–¥—É—Ç –≤ M1 –≤–º–µ—Å—Ç–æ M2

**–ó–∞—â–∏—Ç–∞:**
```javascript
// src/config.js
this.YANDEX_CAMPAIGN_ID = process.env.YANDEX_CAMPAIGN_ID;

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
if (!this.YANDEX_CAMPAIGN_ID || this.YANDEX_CAMPAIGN_ID === 'YOUR_CAMPAIGN_ID_HERE') {
  throw new Error('YANDEX_CAMPAIGN_ID –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!');
}
```

**–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å:**
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ `.env` —É–∫–∞–∑–∞–Ω Campaign ID M2
- ‚úÖ –ù–ï —É–∫–∞–∑—ã–≤–∞–π—Ç–µ Campaign ID M1 –≤ `.env`

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°–ª—É—á–∞–π–Ω–æ –¥–æ–±–∞–≤–∏–ª–∏ —Ç–æ–≤–∞—Ä M1 –≤ –º–∞–ø–ø–∏–Ω–≥

**–†–∏—Å–∫:** Middleware –Ω–∞—á–Ω—ë—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–≤–∞—Ä M1

**–ó–∞—â–∏—Ç–∞:**
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é
- ‚úÖ –í—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç–µ –∫–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –≤ –º–∞–ø–ø–∏–Ω–≥–µ
- ‚úÖ –¢–æ–≤–∞—Ä—ã –±–µ–∑ –º–∞–ø–ø–∏–Ω–≥–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

**–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å:**
- ‚úÖ –î–æ–±–∞–≤–ª—è–π—Ç–µ –≤ –º–∞–ø–ø–∏–Ω–≥ –¢–û–õ–¨–ö–û —Ç–æ–≤–∞—Ä—ã M2
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ offerId –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–ª—É—á–∞–π–Ω–æ –∏–∑–º–µ–Ω–∏–ª–∏ product.offerId –≤ –ú–æ–π–°–∫–ª–∞–¥

**–†–∏—Å–∫:** M1 –Ω–∞—á–Ω—ë—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π offerId

**–ó–∞—â–∏—Ç–∞:**
- ‚úÖ Middleware –ù–ï –∏–∑–º–µ–Ω—è–µ—Ç `product.offerId`
- ‚úÖ Middleware –ù–ï —á–∏—Ç–∞–µ—Ç `product.offerId`
- ‚úÖ Middleware —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û —Å —Ñ–∞–π–ª–æ–º –º–∞–ø–ø–∏–Ω–≥–∞

**–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å:**
- ‚úÖ –ù–ï –∏–∑–º–µ–Ω—è–π—Ç–µ `product.offerId` –≤ –ú–æ–π–°–∫–ª–∞–¥
- ‚úÖ M1 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `product.offerId` –∫–∞–∫ –µ—Å—Ç—å

---

## ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ï –ì–ê–†–ê–ù–¢–ò–ò

### 1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–∞–Ω–Ω—ã—Ö

```
–ú–æ–π–°–∫–ª–∞–¥ (–æ–±—â–∞—è –±–∞–∑–∞)
‚îú‚îÄ product.offerId ‚Üí M1 —á–∏—Ç–∞–µ—Ç
‚îî‚îÄ product.id ‚Üí M2 –º–∞–ø–ø–∏—Ç —á–µ—Ä–µ–∑ —Ñ–∞–π–ª

–ù–ï–¢ –ö–û–ù–§–õ–ò–ö–¢–û–í ‚úÖ
```

### 2. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ API

```
–Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç API
‚îú‚îÄ Campaign ID M1 ‚Üí M1 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
‚îî‚îÄ Campaign ID M2 ‚Üí M2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç

–†–ê–ó–ù–´–ï –ú–ê–ì–ê–ó–ò–ù–´ ‚úÖ
```

### 3. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ª–æ–≥–∏–∫–∏

```
Middleware
‚îú‚îÄ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¢–û–õ–¨–ö–û —Ç–æ–≤–∞—Ä—ã –∏–∑ –º–∞–ø–ø–∏–Ω–≥–∞
‚îú‚îÄ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¢–û–õ–¨–ö–û Campaign ID M2
‚îî‚îÄ –ù–ï —Ç—Ä–æ–≥–∞–µ—Ç product.offerId

M1 –ò–ó–û–õ–ò–†–û–í–ê–ù ‚úÖ
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –ó–ê–ü–£–°–ö–û–ú

- [ ] –í `.env` —É–∫–∞–∑–∞–Ω Campaign ID M2 (–ù–ï M1!)
- [ ] –í `.env` —É–∫–∞–∑–∞–Ω —Ç–æ–∫–µ–Ω –Ø–Ω–¥–µ–∫—Å M2 (–ù–ï M1!)
- [ ] –í `data/product-mappings.json` –¢–û–õ–¨–ö–û —Ç–æ–≤–∞—Ä—ã M2
- [ ] offerId –≤ –º–∞–ø–ø–∏–Ω–≥–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç M2 (–Ω–µ M1!)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ —á—Ç–æ middleware –ù–ï —á–∏—Ç–∞–µ—Ç `product.offerId`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –°–æ–∑–¥–∞–ª–∏ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –º–∞–ø–ø–∏–Ω–≥–∞

---

## üéØ –ò–¢–û–ì

**M1 –∏ M2 –ü–û–õ–ù–û–°–¢–¨–Æ –ò–ó–û–õ–ò–†–û–í–ê–ù–´:**

1. ‚úÖ –†–∞–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö (product.offerId vs —Ñ–∞–π–ª)
2. ‚úÖ –†–∞–∑–Ω—ã–µ Campaign ID (M1 vs M2)
3. ‚úÖ –†–∞–∑–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (M1 vs M2)
4. ‚úÖ –†–∞–∑–Ω—ã–µ offerId (–º–æ–∂–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ, –Ω–æ Campaign ID —Ä–∞–∑–Ω—ã–µ)
5. ‚úÖ Middleware –ù–ï —Ç—Ä–æ–≥–∞–µ—Ç M1
6. ‚úÖ M1 –ù–ï –∑–Ω–∞–µ—Ç –æ middleware

**–†–ò–°–ö –ë–õ–û–ö–ò–†–û–í–ö–ò –ú–ò–ù–ò–ú–ò–ó–ò–†–û–í–ê–ù!** üîí

---

**–ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª:** Kiro AI  
**–î–∞—Ç–∞:** 5 –¥–µ–∫–∞–±—Ä—è 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–ê–†–ê–ù–¢–ò–†–û–í–ê–ù–û
